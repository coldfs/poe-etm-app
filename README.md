# Every Trade Matters (ETM)
# Path of Exile & Path of Exile 2 Trade Notifier

Приложение для отслеживания сообщений о покупке в играх Path of Exile и Path of Exile 2 с отправкой уведомлений через Telegram. Поддерживает одновременный мониторинг обеих версий игры.

## Функции

- Автоматический поиск директорий Path of Exile и Path of Exile 2 в Windows
- Одновременный мониторинг обеих версий игры
- Отслеживание сообщений в Client.txt
- Фильтрация сообщений по шаблону "From *: I would like to buy your*"
- Поддерживаются сообщения на английском и русском языках
- Отправка уведомлений через Telegram
- Настраиваемая конфигурация через файл config.ini


## Варианты установки
## Через бота @poe_etm_bot

1. Отредактируйте файл `config.ini` (создается автоматически при первом запуске):

```ini
[API]
ETM_URL = https://etm-bot-server-b74b2ca681a6.herokuapp.com
ETM_TOKEN = xxx
```

2. Замените `ETM_TOKEN` на токен вашего Telegram бота (получите у [@poe_etm_bot](https://t.me/poe_etm_bot))

Токен можно получить перейдя в бота https://t.me/poe_etm_bot и отправим ему команду /start

При жедании можно поднять собственный сервер для бота https://github.com/coldfs/etm-server


## Через своего бота

1. Отредактируйте файл `config.ini` (создается автоматически при первом запуске):

```ini
[Telegram]
; Токен Telegram бота (получить у @BotFather)
BotToken = YOUR_BOT_TOKEN
; ID чата для отправки уведомлений
ChatID = YOUR_CHAT_ID
```

2. Замените `YOUR_BOT_TOKEN` на токен вашего Telegram бота (получите у [@BotFather](https://t.me/BotFather))
3. Замените `YOUR_CHAT_ID` на ID вашего чата в Telegram (узнайте через [@userinfobot](https://t.me/userinfobot))

### Настройка путей к играм

Приложение автоматически ищет установленные версии Path of Exile и Path of Exile 2. Если вы хотите указать пути вручную или игры установлены в нестандартных местах, отредактируйте `config.ini`:

```ini
[PathOfExile]
CustomPath = C:\Games\Path of Exile

[PathOfExile2]
CustomPath = C:\Games\Path of Exile 2
```

## Компиляция и запуск

### Требования

- Windows (приложение поддерживает только Windows)
- Go 1.16 или выше

### Сборка

```bash
go build -tags windows
```

### Запуск

```bash
./etm.exe
```


### Мониторинг сообщений

Приложение автоматически отслеживает новые сообщения в файлах Client.txt обеих версий игры и фильтрует сообщения о покупке.
При обнаружении сообщения о покупке, оно будет отображено в логе с указанием версии игры [PoE] или [PoE 2] и отправлено в Telegram.

### Настройка путей к играм

Приложение автоматически находит установленные версии Path of Exile и Path of Exile 2 в стандартных местах (Steam, Grinding Gear Games).
Если игры установлены в нестандартных местах, укажите пути вручную в файле config.ini в секциях [PathOfExile] и [PathOfExile2].
После изменения config.ini, перезапустите приложение или дождитесь автоматического обновления настроек.

## Примечания

- Если программа не может найти директории игр автоматически, укажите пути вручную в файле config.ini
- Приложение поддерживает одновременный мониторинг Path of Exile и Path of Exile 2
- Приложение поддерживает только Windows
- Для корректной работы необходимо запускать от имени пользователя, который имеет доступ к файлам игры